{"version":3,"names":[],"mappings":"","sources":["fetch_search.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function (){\n\n    let current_URL = window.location.search;\n    let search_params = new URLSearchParams(current_URL);\n    let params_search = search_params.get(\"searchbar\");\n\n    fetch(\"https://hifi-corner.herokuapp.com/api/v1/products\", {\n        \"method\": \"GET\",\n    })\n        .then(response => response.json())\n        .then(data => {\n\n        let shop_box = document.querySelector(\".shop__kategorier_nest\");\n        let breadcrumbs_text = document.querySelector(\".breadcrumbs\");\n        let currentPageTitle = document.querySelector(\".currentpage-titel\");\n        let current_data = filterSearch(data, params_search);\n\n        function filterSearch(arr, search) {\n            return arr.filter(function(el) {\n                return (el.model.indexOf(search) !== -1 || el.category.indexOf(search) !== -1 || el.make.indexOf(search) !== -1)\n            });\n        }\n        \n        console.log(current_data);\n\n        if (params_search) {\n            breadcrumbs_text.innerHTML = `<span class=\"breadcrumbs__home\"><a href=\"kategoriliste/index.html\" class=\"breadcrumbs__home_active\">Home</a></span> / ${params_search}</a></span>`;\n            currentPageTitle.innerHTML = `${params_search}`;\n        }\n\n        current_data.forEach(product => {\n\n            let shop_varer = document.createElement(\"div\");\n            shop_varer.className = \"shopkategorier__varer\";\n            shop_varer.setAttribute(`data-id`, product.sku);\n\n            shop_varer.innerHTML = `\n            <div class=\"shop__kategorier_box\">\n                <img class=\"shop__kategorier_varebillede\" src=\"${product.images[0]}\" alt=\"varebillede\">\n            </div>\n                <p class=\"product__text\">${product.model}</p>\n                <a class=\"putinbasket button_brown-button\" href=\"/product/index.html?id=${product.sku}\">ADD TO CART</a>\n            `;\n\n            shop_box.appendChild(shop_varer);\n        });\n    });\n});"],"file":"fetch_search.js"}