{"version":3,"names":[],"mappings":"","sources":["product_details.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\n\n    let current_URL = window.location.search;\n    let search_params = new URLSearchParams(current_URL);\n    let params_id = parseInt(search_params.get(\"id\"));\n\n    fetch(\"https://hifi-corner.herokuapp.com/api/v1/products\", {\n        \"method\": \"GET\",\n        \"headers\": {}\n    })\n        .then(response => response.json())\n        .then(data => {\n\n            let current_data = data.products.find(product => product.id == params_id);\n            let product_box = document.querySelector(\".product-box\");\n            let product_preview = document.createElement(\"article\");\n            let product_description = document.createElement(\"article\");\n            let product_cart = document.createElement(\"article\");\n            let product_info = document.createElement(\"article\");\n            let product_details = document.createElement(\"article\");\n            let product_call = document.createElement(\"article\");\n            let h4 = document.createElement(\"h4\");\n\n            h4.className = \"product-breadcrumbs\"\n            h4.innerHTML = `<a href=\"kategoriliste.html\" class=\"breadcrumbs__home_active\">Home</a> / \n                            <a href=\"shop_kategorier.html?category=${current_data.category}\" class=\"breadcrumbs__home_active\">${current_data.category}</a> \n                            / ${current_data.name}`;\n\n            product_box.appendChild(h4);\n\n            product_preview.className = \"product-preview\";\n            product_preview.innerHTML = `\n                <div class=\"preview-box\">\n                \n                    <div class=\"preview__image-box\">\n                        <img class=\"image-box__image\" src=\"images/produktbilleder/${current_data.image_folder}/${current_data.image}\">\n                    </div>\n\n                    <h2 class=\"heading__preview-text\">more views</h2>\n\n                    <ul class=\"thumb-list preview-box__thumb-list\">\n                        <li class=\"thumb\"><img class=\"thumb__image\" src=\"images/produktbilleder/${current_data.image_folder}/${current_data.image}\"></li>\n                        <li class=\"thumb\"><img class=\"thumb__image\" src=\"images/category_list/cat_amplifyer.jpg\"></li>\n                        <li class=\"thumb\"><img class=\"thumb__image\" src=\"images/category_list/cat_cd_players.jpg\"></li>\n                        <li class=\"thumb\"><img class=\"thumb__image\" src=\"images/category_list/cat_vinyl.jpg\"></li>\n                    </ul>\n                </div>\n            `;\n\n            product_box.appendChild(product_preview);\n\n            product_description.className = \"product-description\";\n            product_description.innerHTML = `\n                <h2 class=\"heading__product-name\">${current_data.name}</h2>\n                <h4 class=\"link link__brand-link\">See other ${current_data.brand} products</h4>\n                <div class=\"price-box\">\n                <h3 class=\"heading__product-price\">${current_data.price}</h3>\n                <h2 class=\"heading__product-sale\">${current_data.sale}</h2>               \n                </div>\n                <p class=\"text__product-description\">${current_data.description}</p>\n\n                <ul class=\"button-list product__button-list\">\n                    <li class=\"button-list__item\"><a class=\"button button_brown-button\">ask a question</a></li>\n                    <li class=\"button-list__item\"><a class=\"button button_brown-button\">part exchange</a></li>\n                    <li class=\"button-list__item\"><a class=\"button button_brown-button\">pay by finance</a></li>\n                    <li class=\"button-list__item\"><a class=\"button button_brown-button\">seen a better price?</a></li>\n                </ul>\n            `;\n\n            product_box.appendChild(product_description);\n\n            product_cart.className = \"product-cart\";\n            product_cart.innerHTML = `\n                <form class=\"product-form\">\n\n                    <fieldset class=\"product-form__variant\">\n\n                        <h3 class=\"product-variant__title\">Finish <span class=\"star\">*</span></h3>\n                        \n                        <div class=\"fetch-variant\"></div>\n\n                    </fieldset>\n\n                    <fieldset class=\"product-form__quantity\">\n\n                        <div class=\"product-form__quantity-box\">\n                            <label class=\"product-quantity__label\">Qty:</label>\n                            <input class=\"product-quantity__input\" type=\"number\" oninput=\"this.value=this.value.slice(0,this.maxLength)\" onkeypress=\"return isNumberKey(event)\" maxlength=\"2\" min=\"1\" max=\"99\" name=\"quantity\" value=\"1\">\n                            <button class=\"button product-form__submit button_brown-button\" type=\"submit\">add to cart</button>\n                            <p class=\"or\">-or-</p>\n                            <div class=\"paypal-button\" id=\"paypal-button\"></div>\n                        </div>\n\n                    </fieldset>\n\n                </form>\n            `;\n\n            product_box.appendChild(product_cart);\n\n            current_data.arrays.finish.forEach(finish => {\n                let product_variant = document.querySelector(\".fetch-variant\")\n                let variant_box = document.createElement(\"div\");\n\n                variant_box.className = \"product-variant__variant-box\"\n                variant_box.innerHTML = `\n                    <input class=\"product-variant__input\" type=\"radio\" name=\"variant\" value=\"${finish.text}\">\n                    <label class=\"product-varaint__label\" for=\"black\">${finish.text}</label>\n                `;\n\n                product_variant.appendChild(variant_box);\n\n            });\n\n            product_info.className = \"product-info\";\n            product_info.innerHTML = `\n                <h2 class=\"heading__product-info\">additional information</h2>\n\n                <table class=\"info-table product-info__info-table\"></table>\n            `;\n\n            product_box.appendChild(product_info);\n\n            current_data.arrays.info.forEach(info => {\n                let info_table = document.querySelector(\".product-info__info-table\");\n                let table_row = document.createElement(\"tr\");\n\n                table_row.className = \"info-table__table-row\";\n                table_row.innerHTML = `\n                    <td class=\"info-table__data-title\">${info.text}</td>\n                    <td class=\"info-table__data-value\">${info.value}</td>\n                `;\n\n                info_table.appendChild(table_row);\n            });\n\n            product_details.className = \"product-details\"\n            product_details.innerHTML = `\n                <h2 class=\"heading__product-details\">description</h2>\n\n                <table class=\"table product-detail__detail-table\"></table>\n            `;\n\n            product_box.appendChild(product_details);\n\n            current_data.arrays.detail.forEach(detail => {\n                let detail_table = document.querySelector(\".product-detail__detail-table\");\n                let table_row = document.createElement(\"tr\");\n\n                table_row.className = \"detail-table__row\";\n                table_row.innerHTML = `\n                    <td class=\"detail-table__data-title\">${detail.text}</td>\n                    <td class=\"detail-table__data-value\">${detail.value}</td>\n                `;\n\n                detail_table.appendChild(table_row);\n            });\n\n            product_call.className = \"product-call\";\n            product_call.innerHTML = `\n                <article class=\"product-call\">\n                    <button class=\"product-call__button\" href=\"tel:888-888\"><i class=\"fas fa-phone-alt\"></i> CALL US ABOUT THIS PRODUCT</button>\n                </article>\n            `;\n\n            product_box.appendChild(product_call);\n        })\n        .then(() => {\n\n            let preview = document.querySelector(\".image-box__image\");\n            var imgs = Array.from(document.querySelectorAll(\".thumb\"));\n            \n            imgs.forEach(thumb => {\n        \n                let thumbSrc = thumb.firstChild.getAttribute(\"src\");\n                \n                thumb.addEventListener(\"click\", () => {\n        \n                    preview.setAttribute(\"src\", thumbSrc);\n                })\n            });\n        })\n        .then(() => {\n            paypal.Button.render({\n                // Configure environment\n                env: 'sandbox',\n                client: {\n                  sandbox: 'demo_sandbox_client_id',\n                  production: 'demo_production_client_id'\n                },\n                // Customize button (optional)\n                locale: 'en_US',\n                style: {\n                  size: 'small',\n                  color: 'gold',\n                  shape: 'pill',\n                },\n            \n                // Enable Pay Now checkout flow (optional)\n                commit: true,\n            \n                // Set up a payment\n                payment: function(data, actions) {\n                  return actions.payment.create({\n                    transactions: [{\n                      amount: {\n                        total: '0.01',\n                        currency: 'USD'\n                      }\n                    }]\n                  });\n                },\n                // Execute the payment\n                onAuthorize: function(data, actions) {\n                  return actions.payment.execute().then(function() {\n                    // Show a confirmation message to the buyer\n                    window.alert('Thank you for your purchase!');\n                  });\n                }\n              }, '#paypal-button');\n        })\n});"],"file":"product_details.js"}